{% extends '_base.html' %}

{% block title %}Login - {{ CONFIG["COMPANY_NAME"] }}{% endblock %}

{% block body_class %}login-body{% endblock %}

{% block content %}
  <div class="login-theme-toggle theme-toggle-host"></div>
  <!-- Login page -->
  <div class="login-wrapper">
    <div class="login-card">
      <div class="login-header">
        <div class="login-logo">
          <span class="material-symbols-outlined login-logo-icon">enterprise</span>
        </div>
        <h1>{{ CONFIG["COMPANY_NAME"] }}</h1>
        <p>{{ CONFIG["LABELS"]["LOGIN_SUBTITLE"] }}</p>
      </div>

      <form method="post" action="{{ url_for('login') }}" id="loginForm">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
        
        <!-- Username Input -->
        <div class="form-group">
          <label for="username">Username</label>
          <input
            type="text"
            id="username"
            name="username"
            required
            placeholder="Enter your username"
            autocomplete="username"
            autofocus
          />
        </div>

        <!-- Password -->
        <div class="form-group">
          <label for="password">Password</label>
          <input
            type="password"
            id="password"
            name="password"
            required
            placeholder="Enter your password"
            autocomplete="current-password"
          />
        </div>

        <button type="submit" id="loginBtn">
          Sign In
        </button>
      </form>
    </div>
  </div>
<script>
  // Form submission with loading state
  document.addEventListener('DOMContentLoaded', function() {
    const loginForm = document.getElementById('loginForm');
    if (loginForm) {
      loginForm.addEventListener('submit', function(e) {
        const loginBtn = document.getElementById('loginBtn');
        if (loginBtn) {
          loginBtn.disabled = true;
          loginBtn.innerHTML = '<span class="material-symbols-outlined spin-animation">progress_activity</span><span>Signing in...</span>';
        }
      });
    }
  });
</script>

<style>
  /* Login button */
  #loginBtn {
    width: 100%;
    padding: 14px;
    font-size: 1rem;
    font-weight: 600;
  }

  /* Animations */
  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .spin-animation {
    animation: spin 1s linear infinite;
  }
</style>
{% endblock %}
