<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Asset {{ asset.asset_id }} - {{ CONFIG["COMPANY_NAME"] }}</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
  <style>
    * { box-sizing: border-box; }
    body { margin: 0; padding: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f8f9fa; }
    .container { max-width: 600px; margin: 0 auto; background: white; padding: 2rem; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .title { text-align: center; margin: 0 0 2rem 0; font-size: 1.5rem; }
    .section { margin-bottom: 1.5rem; }
    .label { font-size: 0.75rem; color: #868e96; margin-bottom: 0.5rem; font-weight: 600; text-transform: uppercase; }
    .value { font-size: 1.125rem; font-weight: 600; }
    .assigned-box { background: #f1f3f5; padding: 1.5rem; border-radius: 8px; margin: 1.5rem 0; }
    .employee-name { font-size: 1.25rem; font-weight: 600; margin-bottom: 0.75rem; }
    .employee-detail { margin: 0.5rem 0; font-size: 0.938rem; }
    .not-assigned { text-align: center; padding: 2rem; background: #f1f3f5; border-radius: 8px; margin: 1.5rem 0; }
    .footer { text-align: center; margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #e9ecef; color: #868e96; font-size: 0.875rem; }
    .material-symbols-outlined { vertical-align: middle; }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="title">
      <span class="material-symbols-outlined" style="font-size: 2rem;">inventory_2</span>
      Asset {{ asset.asset_id }}
    </h1>
    
    <div class="section">
      <div class="label">Asset Type</div>
      <div class="value">{{ asset.asset_type }}</div>
    </div>
    
    {% if asset.brand or asset.model %}
    <div class="section">
      <div class="label">Brand & Model</div>
      <div class="value">{{ asset.brand }} {{ asset.model }}</div>
    </div>
    {% endif %}
    
    {% if asset.serial_number %}
    <div class="section">
      <div class="label">Serial Number</div>
      <div class="value" style="font-family: monospace;">{{ asset.serial_number }}</div>
    </div>
    {% endif %}
    
    <div class="section">
      <div class="label">Status</div>
      <div><span class="status-badge status-{{ asset.status.lower() }}">{{ asset.status }}</span></div>
    </div>
    
    <!-- DEBUG: assigned_to={{ asset.assigned_to }}, employee={{ employee }}, status={{ asset.status }} -->
    
    {% if asset.assigned_to and employee %}
    <div class="assigned-box">
      <div class="label">Assigned To</div>
      <div class="employee-name">
        <span class="material-symbols-outlined">person</span>
        {{ employee.name or employee.username }}
      </div>
      {% if employee.email %}
      <div class="employee-detail">
        <span class="material-symbols-outlined" style="font-size: 1.125rem;">email</span>
        {{ employee.email }}
      </div>
      {% endif %}
      {% if employee.phone %}
      <div class="employee-detail">
        <span class="material-symbols-outlined" style="font-size: 1.125rem;">phone</span>
        {{ employee.phone }}
      </div>
      {% endif %}
      {% if employee.department %}
      <div class="employee-detail">
        <span class="material-symbols-outlined" style="font-size: 1.125rem;">business</span>
        {{ employee.department }}
      </div>
      {% endif %}
      {% if asset.assigned_date %}
      <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #dee2e6; font-size: 0.813rem; color: #868e96;">
        Assigned on {{ asset.assigned_date.strftime('%B %d, %Y') }}
      </div>
      {% endif %}
    </div>
    {% else %}
    <div class="not-assigned">
      <span class="material-symbols-outlined" style="font-size: 3rem; color: #adb5bd;">person_off</span>
      <div style="color: #868e96; margin-top: 0.5rem;">Not currently assigned</div>
    </div>
    {% endif %}
    
    {% if asset.purchase_date %}
    <div class="section">
      <div class="label">Purchase Date</div>
      <div>{{ asset.purchase_date.strftime('%B %d, %Y') }}</div>
    </div>
    {% endif %}
    
    {% if asset.warranty_expiry %}
    <div class="section">
      <div class="label">Warranty Expiry</div>
      <div>{{ asset.warranty_expiry.strftime('%B %d, %Y') }}</div>
    </div>
    {% endif %}
    
    {% if asset.notes %}
    <div class="section">
      <div class="label">Notes</div>
      <div style="line-height: 1.6;">{{ asset.notes }}</div>
    </div>
    {% endif %}
    
    <div class="footer">
      {{ CONFIG["COMPANY_NAME"] }} - Asset Management System
    </div>
  </div>
</body>
</html>
